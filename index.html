<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpolation Search Visualizer</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Link to your external stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <div classa="w-full bg-white rounded-xl shadow-xl p-6 md:p-8">
            <h1 class="text-3xl md:text-4xl font-bold text-center text-blue-600 mb-6">
                Interpolation Search Visualizer
            </h1>

            <!-- Input Section -->
            <div class="p-4 border border-gray-200 rounded-lg bg-white mb-6 shadow-sm">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="array-input" class="block text-sm font-medium text-gray-700 mb-1">
                            Numbers (comma-separated)
                        </label>
                        <input type="text" id="array-input" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 5, 3, 22, 1, 10, 15, 8">
                    </div>
                    <div>
                        <label for="target-input" class="block text-sm font-medium text-gray-700 mb-1">
                            Target to Find
                        </label>
                        <input type="number" id="target-input" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="e.g., 22">
                    </div>
                </div>
                <!-- Random Array Generator -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200">
                    <div class="md:col-span-2">
                        <label for="random-count" class="block text-sm font-medium text-gray-700 mb-1">
                            ...or Generate Random Array
                        </label>
                        <input type="number" id="random-count" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500" placeholder="How many numbers? (e.g., 10)">
                    </div>
                    <div class="flex items-end">
                        <button id="generate-random" class="w-full p-3 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition-all duration-300 h-full">
                            Generate
                        </button>
                    </div>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="flex justify-center mb-6 gap-4">
                <button id="start-button" class="w-full md:w-1/4 p-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition-all duration-300 text-lg">
                    Start Visualization
                </button>
                <button id="prev-step-button" class="w-full md:w-1/4 p-3 bg-gray-500 text-white font-bold rounded-lg shadow-md hover:bg-gray-600 transition-all duration-300 text-lg hidden">
                    ⬅ Previous Step
                </button>
                <button id="next-step-button" class="w-full md:w-1/4 p-3 bg-green-600 text-white font-bold rounded-lg shadow-md hover:bg-green-700 transition-all duration-300 text-lg hidden">
                    Next Step ➔
                </button>
                <button id="reset-button" class="w-full md:w-1/4 p-3 bg-gray-500 text-white font-bold rounded-lg shadow-md hover:bg-gray-600 transition-all duration-300 text-lg hidden">
                    Reset
                </button>
            </div>

            <!-- View Toggles -->
            <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg bg-white mb-6 shadow-sm">
                <h3 class="text-lg font-semibold mb-3 text-center text-gray-700">View Options</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <label class="flex items-center justify-center p-2 bg-white border-2 rounded-lg shadow-sm has-[:checked]:bg-blue-50 has-[:checked]:border-blue-400 cursor-pointer transition-all">
                        <input type="checkbox" id="toggle-array" class="form-checkbox h-5 w-5 text-blue-600 rounded mr-2 focus:ring-blue-500" checked>
                        <span class="text-sm font-medium text-gray-800">Array View</span>
                    </label>
                    <label class="flex items-center justify-center p-2 bg-white border-2 rounded-lg shadow-sm has-[:checked]:bg-blue-50 has-[:checked]:border-blue-400 cursor-pointer transition-all">
                        <input type="checkbox" id="toggle-formula" class="form-checkbox h-5 w-5 text-blue-600 rounded mr-2 focus:ring-blue-500" checked>
                        <span class="text-sm font-medium text-gray-800">Formula View</span>
                    </label>
                    <label class="flex items-center justify-center p-2 bg-white border-2 rounded-lg shadow-sm has-[:checked]:bg-blue-50 has-[:checked]:border-blue-400 cursor-pointer transition-all">
                        <input type="checkbox" id="toggle-code" class="form-checkbox h-5 w-5 text-blue-600 rounded mr-2 focus:ring-blue-500" checked>
                        <span class="text-sm font-medium text-gray-800">Code View</span>
                    </label>
                    <label class="flex items-center justify-center p-2 bg-white border-2 rounded-lg shadow-sm has-[:checked]:bg-blue-50 has-[:checked]:border-blue-400 cursor-pointer transition-all">
                        <input type="checkbox" id="toggle-log" class="form-checkbox h-5 w-5 text-blue-600 rounded mr-2 focus:ring-blue-500" checked>
                        <span class="text-sm font-medium text-gray-800">Log View</span>
                    </label>
                </div>
            </div>

            <!-- Core Concept Box -->
            <div class="bg-blue-50 border-l-4 border-blue-400 text-blue-800 p-4 rounded-lg shadow-sm mb-8" role="alert">
                 <div class="flex">
                    <div class="py-1"><svg class="fill-current h-6 w-6 text-blue-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zM9 11v-2h2v2H9zm0 4v-2h2v2H9z"/></svg></div>
                    <div>
                        <p class="font-bold">How It "Thinks"</p>
                        <p class="text-sm">Interpolation Search guesses where to look. If you're looking for "Steve" in a phone book, you wouldn't start at 'A'. You'd guess it's near the 'S' section. This search does the same with numbers, assuming they are evenly spread out.</p>
                    </div>
                </div>
            </div>

            <!-- 
                *** THIS IS THE NEW DRAGGABLE CONTAINER ***
                This wrapper is what SortableJS will target.
            -->
            <div id="main-content-container" class="flex flex-col gap-8">
            
                <!-- Item 1: Array Visualization (Handle Added) -->
                <div id="component-array-container" class="bg-white rounded-xl shadow-xl p-6 md:p-8">
                    <h2 class="text-2xl font-semibold mb-6 text-center flex items-center justify-center gap-2">
                        <svg class="drag-handle cursor-grab h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        Array Visualization
                    </h2>
                    <div id="array-container" class="w-full min-h-[150px] p-4 border-2 border-dashed border-gray-300 rounded-lg flex flex-wrap justify-center items-start gap-3 md:gap-4 pt-8">
                        <span class="text-gray-400">Enter data and press 'Start' to see the visualization.</span>
                    </div>
                </div>
                
                <!-- Item 2: Formula Breakdown (Handle Added) -->
                <div id="component-formula-container" class="bg-white rounded-xl shadow-xl p-6 md:p-8 hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-center flex items-center justify-center gap-2">
                        <svg class="drag-handle cursor-grab h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        Live Formula Breakdown
                    </h2>
                    <div class="formula-box">
                        <div class="text-center text-gray-400 mb-4">probe = low + (Index Range * Value's Position) / Value Range</div>
                        <div class="formula-step">
                            <span class="formula-label">Index Range</span>
                            <span class="formula-calc">(high - low) = <span id="vf-high" class="var-val">?</span> - <span id="vf-low" class="var-val">?</span> = <span id="vf-index-range" class="var-val">?</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="formula-label">Value's Position</span>
                            <span class="formula-calc">(value - array[low]) = <span id="vf-target" class="var-val">?</span> - <span id="vf-arr-low" class="var-val">?</span> = <span id="vf-val-pos" class="var-val">?</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="formula-label">Value Range</span>
                            <span class="formula-calc">(array[high] - array[low]) = <span id="vf-arr-high" class="var-val">?</span> - <span id="vf-arr-low-2" class="var-val">?</span> = <span id="vf-val-range" class="var-val">?</span></span>
                        </div>
                        <div class="formula-step">
                            <span class="formula-label">Calculation</span>
                            <span class="formula-calc">(<span id="vf-index-range-2" class="var-val">?</span> * <span id="vf-val-pos-2" class="var-val">?</span>) / <span id="vf-val-range-2" class="var-val">?</span> = <span id="vf-calc-res" class="var-val">?</span></span>
                        </div>
                        <div class="final-result">
                            probe = <span id="vf-low-2" class="var-val">?</span> + <span id="vf-calc-res-2" class="var-val">?</span> = <span id="vf-result" class="var-val">?</span>
                        </div>
                    </div>
                </div>

                <!-- Item 3: C++ Code (Handle Added) -->
                <div id="component-code-container" class="bg-white rounded-xl shadow-xl p-6 md:p-8 hidden">
                    <h2 class="text-2xl font-semibold mb-4 text-center flex items-center justify-center gap-2">
                        <svg class="drag-handle cursor-grab h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        C++ Code
                    </h2>
                    <div class="bg-gray-900 text-gray-300 rounded-lg p-4 overflow-x-auto text-sm">
                        <pre><code class="language-cpp">
<span id="code-line-1">int interpolationSearch(int array[], int n, int value) {</span>
<span id="code-line-2">    int high = n - 1;</span>
<span id="code-line-3">    int low = 0;</span>
<span id="code-line-4">    </span>
<span id="code-line-5">    while (value >= array[low] && value <= array[high] && low<=high) {</span>
<span id="code-line-6">        if (array[high] == array[low]) {</span>
<span id="code-line-7">            if (array[low] == value)</span>
<span id="code-line-8">                return low;</span>
<span id="code-line-9">            else</span>
<span id="code-line-10">                break;</span>
<span id="code-line-11">        }</span>
<span id="code-line-12"></span>
<span id="code-line-13">        int probe = low + (high-low) * (value - array[low]) / (array[high] - array[low]);</span>
<span id="code-line-14">        </span>
<span id="code-line-15">        if (array[probe]==value) {</span>
<span id="code-line-16">            return probe;</span>
<span id="code-line-17">        }</span>
<span id="code-line-18">        else if (array[probe]>value) {</span>
<span id="code-line-19">            high = probe - 1;</span>
<span id="code-line-20">        }</span>
<span id="code-line-21">        else {</span>
<span id="code-line-22">            low = probe + 1;</span>
<span id="code-line-23">        }</span>
<span id="code-line-24">    }</span>
<span id="code-line-25">    </span>
<span id="code-line-26">    return -1;</span>
<span id="code-line-27">}</span>
                        </code></pre>
                    </div>
                </div>

                <!-- Item 4: Explanation Log (Handle Added) -->
                <div id="component-log-container" class="bg-white rounded-xl shadow-xl p-6 md:p-8">
                    <h2 class="text-2xl font-semibold mb-4 text-center flex items-center justify-center gap-2">
                        <svg class="drag-handle cursor-grab h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        Step-by-Step Explanation
                    </h2>
                    <div id="explanation-log" class="w-full h-96 overflow-y-auto p-4 border border-gray-300 rounded-lg bg-gray-50 shadow-inner">
                        <span class="text-gray-400">Detailed steps will appear here...</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- *** Add SortableJS library *** -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <!-- *** LINK TO app.js AS A MODULE *** -->
    <script type="module" src="js/app.js"></script>
</body>
</html>

